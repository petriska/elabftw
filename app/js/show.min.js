/*! elabftw https://www.elabftw.net */

!function(){"use strict";$(document).ready(function(){function getCheckedBoxes(){var checkedBoxes=[];return $("input[type=checkbox]:checked").each(function(){checkedBoxes.push($(this).data("id"))}),checkedBoxes}$(".submit-reset").on("click",function(){window.location.href="?mode=show"}),$(".form-control").on("change",function(){$("#filter-order-sort").submit()}),$(".bodyToggleImg").click(function(){"app/img/show-more.png"==$(this).attr("src")?$(this).attr("src","app/img/show-less.png"):$(this).attr("src","app/img/show-more.png");var id=$(this).attr("id"),idArr=id.split("_");id=idArr[1],$.post("app/controllers/EntityController.php",{getBody:!0,id:id,type:$(this).data("type")}).done(function(data){$("#bodyToggle_"+id).html(data.msg);var width=$("#parent_"+id).width()-30;$("#bodyToggle_"+id).css("width",width),$("#bodyToggle_"+id).toggle()})});var controller="app/controllers/DatabaseController.php";"experiments.php"===location.pathname.substring(location.pathname.lastIndexOf("/")+1)&&(controller="app/controllers/ExperimentsController.php",key($("#shortcuts").data("create"),function(){window.location.href=controller+"?create=true"})),$(document).on("click",".previous-page",function(){insertParamAndReload("offset",$("#infos").data("offset")-$("#infos").data("limit"))}),$(document).on("click",".next-page",function(){insertParamAndReload("offset",$("#infos").data("offset")+$("#infos").data("limit"))}),$(document).on("click",".show-all",function(){insertParamAndReload("limit","over9000")});$("input[type=checkbox]").on("click",function(){$(this).prop("checked")?$(this).parent().parent().css("background-color","#c4f9ff"):$(this).parent().parent().css("background-color","")}),$("#selectAllBoxes").click(function(){$("input[type=checkbox]").prop("checked",!0),$("input[type=checkbox]").parent().parent().css("background-color","#c4f9ff"),$("#advancedSelectOptions").show(),$("#withSelected").show(),$("section.item:hidden").show(),$("#loadAllButton").hide(),$("#loadButton").hide()}),$("#unselectAllBoxes").click(function(){$("input:checkbox").prop("checked",!1),$("input[type=checkbox]").parent().parent().css("background-color","")}),$("#invertSelection").click(function(){$("input[type=checkbox]").each(function(){this.checked=!this.checked,$(this).prop("checked")?$(this).parent().parent().css("background-color","#c4f9ff"):$(this).parent().parent().css("background-color","")})}),$("#withSelected").hide(),$("#advancedSelectOptions").hide(),$("input[type=checkbox]").click(function(){$("#advancedSelectOptions").show(),$("#withSelected").show()}),$("#catChecked").on("change",function(){var ajaxs=[],checked=getCheckedBoxes();$.each(checked,function(index,value){ajaxs.push($.post("app/controllers/EntityController.php",{updateCategory:!0,id:value,categoryId:$("#catChecked").val(),type:$("#type").data("type")}))}),$.when.apply(null,ajaxs).then(function(){window.location.reload()})}),$("#visChecked").on("change",function(){var ajaxs=[],checked=getCheckedBoxes();$.each(checked,function(index,value){ajaxs.push($.post("app/controllers/ExperimentsController.php",{updateVisibility:!0,id:value,visibility:$("#visChecked").val(),type:$("#type").data("type")}))}),$.when.apply(null,ajaxs).then(function(){window.location.reload()}),notif("Saved","ok")}),$(".csvzip").on("click",function(){$(this).attr("disabled","disabled"),$(this).html("Please waitâ€¦");var type=$("#type").data("type"),checked=getCheckedBoxes(),what=$(this).data("what");window.location.href="make.php?what="+what+"&type="+type+"&id="+checked.join("+")}),$("#deleteChecked").on("click",function(){if(!confirm("Delete this?"))return!1;var checked=getCheckedBoxes();$.each(checked,function(index,value){$.post("app/controllers/EntityController.php",{destroy:!0,id:value,type:$("#type").data("type")}),$("#parent_"+value).hide(200)})})})}();